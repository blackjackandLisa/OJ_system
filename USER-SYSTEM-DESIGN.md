# ç”¨æˆ·è®¤è¯ç³»ç»Ÿéœ€æ±‚è®¾è®¡

## ğŸ“‹ éœ€æ±‚æ¢³ç†

### 1. ç”¨æˆ·è§’è‰²å®šä¹‰

#### 1.1 å­¦ç”Ÿï¼ˆStudentï¼‰
**æƒé™èŒƒå›´ï¼š**
- âœ… æŸ¥çœ‹å·²å‘å¸ƒçš„é¢˜ç›®
- âœ… æäº¤ä»£ç 
- âœ… æŸ¥çœ‹è‡ªå·±çš„æäº¤è®°å½•
- âœ… æŸ¥çœ‹è‡ªå·±çš„ç»Ÿè®¡ä¿¡æ¯
- âœ… å‚ä¸è®¨è®º
- âŒ åˆ›å»º/ç¼–è¾‘é¢˜ç›®
- âŒ æŸ¥çœ‹æµ‹è¯•ç”¨ä¾‹ç­”æ¡ˆ
- âŒ ç®¡ç†å…¶ä»–ç”¨æˆ·

**ä½¿ç”¨åœºæ™¯ï¼š**
- ç»ƒä¹ ç®—æ³•é¢˜ç›®
- å‚åŠ æ¯”èµ›
- æŸ¥çœ‹æ’è¡Œæ¦œ
- æŸ¥çœ‹ä¸ªäººè¿›åº¦

#### 1.2 è€å¸ˆï¼ˆTeacherï¼‰
**æƒé™èŒƒå›´ï¼š**
- âœ… å­¦ç”Ÿçš„æ‰€æœ‰æƒé™
- âœ… åˆ›å»ºå’Œç¼–è¾‘é¢˜ç›®
- âœ… ç®¡ç†æµ‹è¯•ç”¨ä¾‹
- âœ… æŸ¥çœ‹æ‰€æœ‰å­¦ç”Ÿçš„æäº¤è®°å½•
- âœ… åˆ›å»ºå’Œç®¡ç†ç­çº§
- âœ… åˆ›å»ºå’Œç®¡ç†ä½œä¸š
- âœ… æŸ¥çœ‹ç­çº§ç»Ÿè®¡
- âŒ ç®¡ç†å…¶ä»–è€å¸ˆ
- âŒ ç³»ç»Ÿé…ç½®

**ä½¿ç”¨åœºæ™¯ï¼š**
- å‡ºé¢˜å’Œç®¡ç†é¢˜åº“
- å¸ƒç½®ä½œä¸š
- æŸ¥çœ‹å­¦ç”Ÿå®Œæˆæƒ…å†µ
- è¯„åˆ†å’Œåé¦ˆ

#### 1.3 ç®¡ç†å‘˜ï¼ˆAdminï¼‰
**æƒé™èŒƒå›´ï¼š**
- âœ… æ‰€æœ‰æƒé™
- âœ… ç®¡ç†ç”¨æˆ·ï¼ˆåˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ï¼‰
- âœ… ç®¡ç†æ‰€æœ‰é¢˜ç›®
- âœ… ç³»ç»Ÿé…ç½®
- âœ… æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
- âœ… æ•°æ®ç»Ÿè®¡å’Œåˆ†æ

**ä½¿ç”¨åœºæ™¯ï¼š**
- ç³»ç»Ÿç»´æŠ¤
- ç”¨æˆ·ç®¡ç†
- æ•°æ®ç®¡ç†
- ç³»ç»Ÿé…ç½®

### 2. ç”¨æˆ·ä¿¡æ¯éœ€æ±‚

#### 2.1 åŸºæœ¬ä¿¡æ¯
- ç”¨æˆ·åï¼ˆå”¯ä¸€ï¼Œç”¨äºç™»å½•ï¼‰
- é‚®ç®±ï¼ˆå”¯ä¸€ï¼Œç”¨äºæ‰¾å›å¯†ç ï¼‰
- å¯†ç ï¼ˆåŠ å¯†å­˜å‚¨ï¼‰
- çœŸå®å§“å
- å­¦å·/å·¥å·ï¼ˆå¯é€‰ï¼‰
- å¤´åƒ
- ä¸ªäººç®€ä»‹

#### 2.2 è§’è‰²ä¿¡æ¯
- ç”¨æˆ·ç±»å‹ï¼ˆå­¦ç”Ÿ/è€å¸ˆ/ç®¡ç†å‘˜ï¼‰
- æ‰€å±ç­çº§/ç»„ç»‡ï¼ˆå­¦ç”Ÿï¼‰
- æ‰€ç®¡ç†çš„ç­çº§ï¼ˆè€å¸ˆï¼‰

#### 2.3 ç»Ÿè®¡ä¿¡æ¯
- æ€»æäº¤æ•°
- é€šè¿‡é¢˜ç›®æ•°
- å°è¯•é¢˜ç›®æ•°
- ACç‡
- æ³¨å†Œæ—¶é—´
- æœ€åç™»å½•æ—¶é—´

#### 2.4 æ‰©å±•ä¿¡æ¯
- å­¦æ ¡/æœºæ„
- å¹´çº§/å±Š
- ä¸“ä¸š
- ä¸ªæ€§ç­¾å

### 3. è®¤è¯åŠŸèƒ½éœ€æ±‚

#### 3.1 æ³¨å†ŒåŠŸèƒ½
```
å­¦ç”Ÿæ³¨å†Œï¼š
- ç”¨æˆ·åï¼ˆå¿…å¡«ï¼‰
- é‚®ç®±ï¼ˆå¿…å¡«ï¼‰
- å¯†ç ï¼ˆå¿…å¡«ï¼Œéœ€ç¡®è®¤ï¼‰
- çœŸå®å§“åï¼ˆå¿…å¡«ï¼‰
- å­¦å·ï¼ˆå¯é€‰ï¼‰
- éªŒè¯ç ï¼ˆé˜²æ­¢æœºå™¨æ³¨å†Œï¼‰

è€å¸ˆæ³¨å†Œï¼š
- éœ€è¦ç®¡ç†å‘˜å®¡æ ¸æˆ–é‚€è¯·ç 
- é¢å¤–ä¿¡æ¯ï¼šèŒä½ã€æ‰€å±éƒ¨é—¨

ç®¡ç†å‘˜ï¼š
- åªèƒ½é€šè¿‡å‘½ä»¤è¡Œåˆ›å»º
```

#### 3.2 ç™»å½•åŠŸèƒ½
```
æ”¯æŒæ–¹å¼ï¼š
- ç”¨æˆ·å + å¯†ç 
- é‚®ç®± + å¯†ç 

é™„åŠ åŠŸèƒ½ï¼š
- è®°ä½æˆ‘ï¼ˆ7å¤©å…ç™»å½•ï¼‰
- å¿˜è®°å¯†ç ï¼ˆé‚®ä»¶é‡ç½®ï¼‰
- ç™»å½•é™åˆ¶ï¼ˆé˜²æš´åŠ›ç ´è§£ï¼‰
```

#### 3.3 ä¸ªäººä¸­å¿ƒ
```
åŠŸèƒ½ï¼š
- æŸ¥çœ‹ä¸ªäººä¿¡æ¯
- ä¿®æ”¹ä¸ªäººèµ„æ–™
- ä¿®æ”¹å¯†ç 
- ä¸Šä¼ å¤´åƒ
- æŸ¥çœ‹åšé¢˜ç»Ÿè®¡
- æŸ¥çœ‹æäº¤å†å²
- æŸ¥çœ‹é€šè¿‡çš„é¢˜ç›®
```

#### 3.4 æƒé™æ§åˆ¶
```
è£…é¥°å™¨ï¼š
- @student_required  # å­¦ç”Ÿæƒé™
- @teacher_required  # è€å¸ˆæƒé™
- @admin_required    # ç®¡ç†å‘˜æƒé™

ä¸­é—´ä»¶ï¼š
- è‡ªåŠ¨è®°å½•ç”¨æˆ·è¡Œä¸º
- æ£€æŸ¥ç”¨æˆ·çŠ¶æ€ï¼ˆæ˜¯å¦è¢«ç¦ç”¨ï¼‰
```

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### æ‰©å±•Useræ¨¡å‹

#### UserProfileï¼ˆç”¨æˆ·èµ„æ–™è¡¨ï¼‰
```python
class UserProfile(models.Model):
    """ç”¨æˆ·èµ„æ–™æ‰©å±•"""
    
    # ç”¨æˆ·ç±»å‹
    USER_TYPE_CHOICES = [
        ('student', 'å­¦ç”Ÿ'),
        ('teacher', 'è€å¸ˆ'),
        ('admin', 'ç®¡ç†å‘˜'),
    ]
    
    user = OneToOneField(User, on_delete=CASCADE, related_name='profile')
    
    # è§’è‰²ä¿¡æ¯
    user_type = CharField(
        max_length=20,
        choices=USER_TYPE_CHOICES,
        default='student',
        verbose_name='ç”¨æˆ·ç±»å‹'
    )
    
    # åŸºæœ¬ä¿¡æ¯
    real_name = CharField(max_length=50, verbose_name='çœŸå®å§“å')
    student_id = CharField(max_length=50, blank=True, verbose_name='å­¦å·/å·¥å·')
    avatar = ImageField(upload_to='avatars/', blank=True, verbose_name='å¤´åƒ')
    bio = TextField(blank=True, verbose_name='ä¸ªäººç®€ä»‹')
    
    # ç»„ç»‡ä¿¡æ¯
    school = CharField(max_length=100, blank=True, verbose_name='å­¦æ ¡/æœºæ„')
    grade = CharField(max_length=50, blank=True, verbose_name='å¹´çº§/å±Š')
    major = CharField(max_length=100, blank=True, verbose_name='ä¸“ä¸š')
    
    # ç»Ÿè®¡ä¿¡æ¯
    total_submit = IntegerField(default=0, verbose_name='æ€»æäº¤æ•°')
    total_accepted = IntegerField(default=0, verbose_name='é€šè¿‡é¢˜ç›®æ•°')
    
    # å…¶ä»–
    created_at = DateTimeField(auto_now_add=True)
    last_login_at = DateTimeField(null=True, blank=True)
    is_active = BooleanField(default=True, verbose_name='æ˜¯å¦æ¿€æ´»')
    
    @property
    def acceptance_rate(self):
        """ACç‡"""
        if self.total_submit == 0:
            return 0
        return round(self.total_accepted / self.total_submit * 100, 2)
    
    @property
    def is_student(self):
        return self.user_type == 'student'
    
    @property
    def is_teacher(self):
        return self.user_type == 'teacher'
    
    @property
    def is_admin(self):
        return self.user_type == 'admin' or self.user.is_superuser
```

#### Classï¼ˆç­çº§è¡¨ï¼‰
```python
class Class(models.Model):
    """ç­çº§/è¯¾ç¨‹"""
    name = CharField(max_length=100, verbose_name='ç­çº§åç§°')
    code = CharField(max_length=50, unique=True, verbose_name='ç­çº§ä»£ç ')
    description = TextField(blank=True, verbose_name='ç­çº§æè¿°')
    
    # è€å¸ˆ
    teacher = ForeignKey(
        User,
        on_delete=CASCADE,
        limit_choices_to={'profile__user_type': 'teacher'},
        related_name='teaching_classes',
        verbose_name='æˆè¯¾è€å¸ˆ'
    )
    
    # å­¦ç”Ÿ
    students = ManyToManyField(
        User,
        limit_choices_to={'profile__user_type': 'student'},
        related_name='enrolled_classes',
        blank=True,
        verbose_name='å­¦ç”Ÿ'
    )
    
    # çŠ¶æ€
    is_active = BooleanField(default=True, verbose_name='æ˜¯å¦æ¿€æ´»')
    created_at = DateTimeField(auto_now_add=True)
```

#### UserLoginLogï¼ˆç™»å½•æ—¥å¿—è¡¨ï¼‰
```python
class UserLoginLog(models.Model):
    """ç”¨æˆ·ç™»å½•æ—¥å¿—"""
    user = ForeignKey(User, on_delete=CASCADE, related_name='login_logs')
    ip_address = GenericIPAddressField(verbose_name='IPåœ°å€')
    user_agent = CharField(max_length=255, verbose_name='æµè§ˆå™¨ä¿¡æ¯')
    login_time = DateTimeField(auto_now_add=True, verbose_name='ç™»å½•æ—¶é—´')
    is_success = BooleanField(default=True, verbose_name='æ˜¯å¦æˆåŠŸ')
```

## ğŸ¨ é¡µé¢è®¾è®¡

### 1. æ³¨å†Œé¡µé¢
```html
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  OJç³»ç»Ÿ - ç”¨æˆ·æ³¨å†Œ                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  [é€‰æ‹©è§’è‰²]                          â”‚
â”‚  â—‹ å­¦ç”Ÿæ³¨å†Œ  â—‹ è€å¸ˆæ³¨å†Œ              â”‚
â”‚                                      â”‚
â”‚  ç”¨æˆ·å: [____________]               â”‚
â”‚  é‚®ç®±:   [____________]               â”‚
â”‚  å¯†ç :   [____________]               â”‚
â”‚  ç¡®è®¤:   [____________]               â”‚
â”‚                                      â”‚
â”‚  çœŸå®å§“å: [____________]             â”‚
â”‚  å­¦å·:     [____________] (å­¦ç”Ÿ)      â”‚
â”‚  é‚€è¯·ç :   [____________] (è€å¸ˆ)      â”‚
â”‚                                      â”‚
â”‚  å­¦æ ¡:   [____________]               â”‚
â”‚  å¹´çº§:   [____________]               â”‚
â”‚  ä¸“ä¸š:   [____________]               â”‚
â”‚                                      â”‚
â”‚  [æ³¨å†Œ] [å·²æœ‰è´¦å·ï¼Ÿç™»å½•]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. ç™»å½•é¡µé¢
```html
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  OJç³»ç»Ÿ - ç”¨æˆ·ç™»å½•                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  ç”¨æˆ·å/é‚®ç®±: [____________]          â”‚
â”‚  å¯†ç :        [____________]          â”‚
â”‚                                      â”‚
â”‚  [âˆš] è®°ä½æˆ‘  [å¿˜è®°å¯†ç ?]              â”‚
â”‚                                      â”‚
â”‚  [ç™»å½•]                               â”‚
â”‚                                      â”‚
â”‚  è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ[ç«‹å³æ³¨å†Œ]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. ä¸ªäººä¸­å¿ƒ
```html
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸ªäººä¸­å¿ƒ                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [å¤´åƒ]  ç”¨æˆ·å                       â”‚
â”‚          çœŸå®å§“å                     â”‚
â”‚          å­¦ç”Ÿ | å­¦å·: 20210001        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ä¸ªäººä¿¡æ¯] [åšé¢˜ç»Ÿè®¡] [æäº¤è®°å½•]     â”‚
â”‚                                      â”‚
â”‚  é€šè¿‡é¢˜ç›®: 15 é¢˜                      â”‚
â”‚  æ€»æäº¤æ•°: 50 æ¬¡                      â”‚
â”‚  ACç‡: 30%                           â”‚
â”‚                                      â”‚
â”‚  æœ€è¿‘é€šè¿‡:                            â”‚
â”‚  âœ“ ä¸¤æ•°ä¹‹å’Œ (2å¤©å‰)                   â”‚
â”‚  âœ“ å›æ–‡æ•° (5å¤©å‰)                     â”‚
â”‚  ...                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” æƒé™æ§åˆ¶è®¾è®¡

### æƒé™çŸ©é˜µ

| åŠŸèƒ½ | å­¦ç”Ÿ | è€å¸ˆ | ç®¡ç†å‘˜ |
|------|------|------|--------|
| æŸ¥çœ‹é¢˜ç›® | âœ… | âœ… | âœ… |
| æäº¤ä»£ç  | âœ… | âœ… | âœ… |
| æŸ¥çœ‹è‡ªå·±çš„æäº¤ | âœ… | âœ… | âœ… |
| åˆ›å»ºé¢˜ç›® | âŒ | âœ… | âœ… |
| ç¼–è¾‘é¢˜ç›® | âŒ | âœ…è‡ªå·±åˆ›å»ºçš„ | âœ…æ‰€æœ‰ |
| åˆ é™¤é¢˜ç›® | âŒ | âœ…è‡ªå·±åˆ›å»ºçš„ | âœ…æ‰€æœ‰ |
| æŸ¥çœ‹æµ‹è¯•ç”¨ä¾‹ | âŒ | âœ… | âœ… |
| æŸ¥çœ‹ä»–äººæäº¤ | âŒ | âœ…ç­çº§å­¦ç”Ÿ | âœ…æ‰€æœ‰ |
| ç®¡ç†ç”¨æˆ· | âŒ | âŒ | âœ… |
| åˆ›å»ºç­çº§ | âŒ | âœ… | âœ… |
| ç®¡ç†ç­çº§ | âŒ | âœ…è‡ªå·±çš„ç­çº§ | âœ…æ‰€æœ‰ |
| ç³»ç»Ÿé…ç½® | âŒ | âŒ | âœ… |

### è£…é¥°å™¨å®ç°

```python
# users/decorators.py

def student_required(function):
    """è¦æ±‚å­¦ç”Ÿæƒé™"""
    def wrap(request, *args, **kwargs):
        if request.user.is_authenticated:
            if request.user.profile.is_student or request.user.is_staff:
                return function(request, *args, **kwargs)
        return redirect('users:login')
    return wrap

def teacher_required(function):
    """è¦æ±‚è€å¸ˆæƒé™"""
    def wrap(request, *args, **kwargs):
        if request.user.is_authenticated:
            if request.user.profile.is_teacher or request.user.is_staff:
                return function(request, *args, **kwargs)
        return redirect('users:login')
    return wrap

def admin_required(function):
    """è¦æ±‚ç®¡ç†å‘˜æƒé™"""
    def wrap(request, *args, **kwargs):
        if request.user.is_authenticated and request.user.is_staff:
            return function(request, *args, **kwargs)
        return redirect('users:login')
    return wrap
```

## ğŸ”‘ è®¤è¯æµç¨‹è®¾è®¡

### æ³¨å†Œæµç¨‹

```
ç”¨æˆ·è®¿é—®æ³¨å†Œé¡µ
    â†“
é€‰æ‹©è§’è‰²ï¼ˆå­¦ç”Ÿ/è€å¸ˆï¼‰
    â†“
å¡«å†™æ³¨å†Œä¿¡æ¯
    â†“
éªŒè¯ä¿¡æ¯ï¼ˆç”¨æˆ·åã€é‚®ç®±å”¯ä¸€æ€§ï¼‰
    â†“
[å­¦ç”Ÿ] â†’ ç›´æ¥æ³¨å†ŒæˆåŠŸ
[è€å¸ˆ] â†’ éœ€è¦é‚€è¯·ç æˆ–å®¡æ ¸
    â†“
å‘é€æ¬¢è¿é‚®ä»¶ï¼ˆå¯é€‰ï¼‰
    â†“
è‡ªåŠ¨ç™»å½• â†’ è·³è½¬åˆ°ä¸ªäººä¸­å¿ƒ
```

### ç™»å½•æµç¨‹

```
ç”¨æˆ·è®¿é—®ç™»å½•é¡µ
    â†“
è¾“å…¥ç”¨æˆ·å/é‚®ç®± + å¯†ç 
    â†“
éªŒè¯å‡­æ®
    â†“
è®°å½•ç™»å½•æ—¥å¿—
    â†“
æ›´æ–°æœ€åç™»å½•æ—¶é—´
    â†“
åˆ›å»ºSession
    â†“
è·³è½¬åˆ°é¦–é¡µæˆ–æ¥æºé¡µé¢
```

### å¯†ç é‡ç½®æµç¨‹

```
ç”¨æˆ·ç‚¹å‡»"å¿˜è®°å¯†ç "
    â†“
è¾“å…¥é‚®ç®±
    â†“
å‘é€é‡ç½®é“¾æ¥ï¼ˆå«tokenï¼‰
    â†“
ç”¨æˆ·ç‚¹å‡»é‚®ä»¶é“¾æ¥
    â†“
éªŒè¯tokenæœ‰æ•ˆæ€§
    â†“
è¾“å…¥æ–°å¯†ç 
    â†“
æ›´æ–°å¯†ç  â†’ è‡ªåŠ¨ç™»å½•
```

## ğŸ¨ APIè®¾è®¡

### è®¤è¯ç›¸å…³API

#### æ³¨å†Œ
```
POST /api/users/register/

è¯·æ±‚ä½“:
{
  "username": "student001",
  "email": "student@example.com",
  "password": "SecurePass123!",
  "password2": "SecurePass123!",
  "user_type": "student",
  "real_name": "å¼ ä¸‰",
  "student_id": "20210001",
  "school": "XXå¤§å­¦",
  "grade": "2021",
  "major": "è®¡ç®—æœºç§‘å­¦"
}

å“åº”: 201 Created
{
  "id": 1,
  "username": "student001",
  "email": "student@example.com",
  "token": "eyJ0eXAiOiJKV1QiLCJhbGc...",
  "user_type": "student"
}
```

#### ç™»å½•
```
POST /api/users/login/

è¯·æ±‚ä½“:
{
  "username": "student001",
  "password": "SecurePass123!"
}

å“åº”: 200 OK
{
  "token": "eyJ0eXAiOiJKV1QiLCJhbGc...",
  "user": {
    "id": 1,
    "username": "student001",
    "email": "student@example.com",
    "user_type": "student",
    "real_name": "å¼ ä¸‰"
  }
}
```

#### ç™»å‡º
```
POST /api/users/logout/

å“åº”: 200 OK
```

#### è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
```
GET /api/users/me/

å“åº”: 200 OK
{
  "id": 1,
  "username": "student001",
  "email": "student@example.com",
  "user_type": "student",
  "real_name": "å¼ ä¸‰",
  "student_id": "20210001",
  "avatar": "/media/avatars/user1.jpg",
  "stats": {
    "total_submit": 50,
    "total_accepted": 15,
    "acceptance_rate": 30.0
  }
}
```

#### æ›´æ–°ä¸ªäººä¿¡æ¯
```
PUT /api/users/me/
PATCH /api/users/me/

è¯·æ±‚ä½“:
{
  "real_name": "å¼ ä¸‰",
  "bio": "çƒ­çˆ±ç®—æ³•çš„å­¦ç”Ÿ",
  "school": "XXå¤§å­¦"
}

å“åº”: 200 OK
```

#### ä¿®æ”¹å¯†ç 
```
POST /api/users/change-password/

è¯·æ±‚ä½“:
{
  "old_password": "OldPass123!",
  "new_password": "NewPass123!",
  "new_password2": "NewPass123!"
}

å“åº”: 200 OK
```

### ç”¨æˆ·ç®¡ç†APIï¼ˆç®¡ç†å‘˜ï¼‰

```
GET /api/users/              # ç”¨æˆ·åˆ—è¡¨
GET /api/users/{id}/         # ç”¨æˆ·è¯¦æƒ…
PUT /api/users/{id}/         # æ›´æ–°ç”¨æˆ·
DELETE /api/users/{id}/      # åˆ é™¤ç”¨æˆ·
POST /api/users/{id}/ban/    # ç¦ç”¨ç”¨æˆ·
POST /api/users/{id}/unban/  # è§£ç¦ç”¨æˆ·
```

### ç­çº§ç®¡ç†APIï¼ˆè€å¸ˆï¼‰

```
GET /api/classes/              # ç­çº§åˆ—è¡¨
POST /api/classes/             # åˆ›å»ºç­çº§
GET /api/classes/{id}/         # ç­çº§è¯¦æƒ…
PUT /api/classes/{id}/         # æ›´æ–°ç­çº§
DELETE /api/classes/{id}/      # åˆ é™¤ç­çº§
POST /api/classes/{id}/join/   # å­¦ç”ŸåŠ å…¥ç­çº§
```

## ğŸ›¡ï¸ å®‰å…¨è®¾è®¡

### 1. å¯†ç å®‰å…¨
- âœ… ä½¿ç”¨Djangoå†…ç½®çš„å¯†ç åŠ å¯†ï¼ˆPBKDF2ï¼‰
- âœ… å¯†ç å¼ºåº¦éªŒè¯
- âœ… å¯†ç å†å²è®°å½•ï¼ˆé˜²æ­¢é‡å¤ä½¿ç”¨ï¼‰
- âœ… ç™»å½•å¤±è´¥é™åˆ¶ï¼ˆ5æ¬¡åé”å®š10åˆ†é’Ÿï¼‰

### 2. Sessionå®‰å…¨
- âœ… Sessionè¶…æ—¶è®¾ç½®ï¼ˆ2å°æ—¶ï¼‰
- âœ… CSRFä¿æŠ¤
- âœ… å®‰å…¨Cookieï¼ˆHTTPSç¯å¢ƒï¼‰

### 3. é˜²æš´åŠ›ç ´è§£
- âœ… ç™»å½•é¢‘ç‡é™åˆ¶
- âœ… éªŒè¯ç ï¼ˆå¤šæ¬¡å¤±è´¥åï¼‰
- âœ… IPé»‘åå•

### 4. æ•°æ®éªŒè¯
- âœ… ç”¨æˆ·åæ ¼å¼éªŒè¯ï¼ˆ3-20ä½ï¼Œå­—æ¯æ•°å­—ä¸‹åˆ’çº¿ï¼‰
- âœ… é‚®ç®±æ ¼å¼éªŒè¯
- âœ… å¯†ç å¤æ‚åº¦éªŒè¯
- âœ… XSSé˜²æŠ¤

## ğŸ¯ ç”¨æˆ·æ³¨å†Œæµç¨‹

### å­¦ç”Ÿæ³¨å†Œï¼ˆå¼€æ”¾æ³¨å†Œï¼‰
```
1. è®¿é—®æ³¨å†Œé¡µé¢
2. é€‰æ‹©"å­¦ç”Ÿæ³¨å†Œ"
3. å¡«å†™åŸºæœ¬ä¿¡æ¯
   - ç”¨æˆ·å
   - é‚®ç®±
   - å¯†ç 
   - çœŸå®å§“å
   - å­¦å·ï¼ˆå¯é€‰ï¼‰
4. å¡«å†™å­¦æ ¡ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰
5. åŒæ„æœåŠ¡æ¡æ¬¾
6. æäº¤æ³¨å†Œ
7. è‡ªåŠ¨ç™»å½•
8. è·³è½¬åˆ°ä¸ªäººä¸­å¿ƒ
```

### è€å¸ˆæ³¨å†Œï¼ˆéœ€è¦å®¡æ ¸ï¼‰
```
1. è®¿é—®æ³¨å†Œé¡µé¢
2. é€‰æ‹©"è€å¸ˆæ³¨å†Œ"
3. å¡«å†™åŸºæœ¬ä¿¡æ¯
4. è¾“å…¥é‚€è¯·ç ï¼ˆæˆ–ç­‰å¾…å®¡æ ¸ï¼‰
5. æäº¤æ³¨å†Œ
6. [éœ€å®¡æ ¸] ç®¡ç†å‘˜å®¡æ ¸é€šè¿‡åæ¿€æ´»
7. [æœ‰é‚€è¯·ç ] ç«‹å³æ¿€æ´»
8. å‘é€ç¡®è®¤é‚®ä»¶
9. ç™»å½•ä½¿ç”¨
```

### ç®¡ç†å‘˜åˆ›å»ºï¼ˆå‘½ä»¤è¡Œï¼‰
```bash
# é€šè¿‡Djangoå‘½ä»¤åˆ›å»º
python manage.py createsuperuser

# æˆ–åœ¨Shellä¸­åˆ›å»º
from django.contrib.auth.models import User
user = User.objects.create_superuser('admin', 'admin@example.com', 'password')
```

## ğŸ“Š ä¸ªäººä¸­å¿ƒåŠŸèƒ½

### ç»Ÿè®¡ä¿¡æ¯
- é€šè¿‡é¢˜ç›®æ•°
- æ€»æäº¤æ•°
- ACç‡
- åšé¢˜æ—¥å†ï¼ˆçƒ­åŠ›å›¾ï¼‰
- é¢˜ç›®éš¾åº¦åˆ†å¸ƒ
- æ ‡ç­¾åˆ†å¸ƒ

### åšé¢˜è®°å½•
- æœ€è¿‘æäº¤
- é€šè¿‡çš„é¢˜ç›®åˆ—è¡¨
- å°è¯•ä¸­çš„é¢˜ç›®
- æ”¶è—çš„é¢˜ç›®ï¼ˆå¯é€‰ï¼‰

### ä¸ªäººè®¾ç½®
- ä¿®æ”¹ä¸ªäººä¿¡æ¯
- ä¿®æ”¹å¯†ç 
- ä¸Šä¼ å¤´åƒ
- é‚®ç®±éªŒè¯
- éšç§è®¾ç½®

## ğŸš€ å¼€å‘ä¼˜å…ˆçº§

### Phase 1: åŸºç¡€è®¤è¯ï¼ˆWeek 1ï¼‰
```
ä¼˜å…ˆçº§: â­â­â­â­â­

- æ‰©å±•Useræ¨¡å‹ï¼ˆUserProfileï¼‰
- æ³¨å†ŒåŠŸèƒ½ï¼ˆå­¦ç”Ÿï¼‰
- ç™»å½•åŠŸèƒ½
- ç™»å‡ºåŠŸèƒ½
- ä¸ªäººä¸­å¿ƒï¼ˆåŸºç¡€ä¿¡æ¯ï¼‰
```

### Phase 2: è§’è‰²æƒé™ï¼ˆWeek 1-2ï¼‰
```
ä¼˜å…ˆçº§: â­â­â­â­

- ç”¨æˆ·ç±»å‹åŒºåˆ†
- æƒé™è£…é¥°å™¨
- è€å¸ˆæ³¨å†Œå’Œå®¡æ ¸
- æƒé™æ§åˆ¶
```

### Phase 3: ç­çº§ç³»ç»Ÿï¼ˆWeek 2ï¼‰
```
ä¼˜å…ˆçº§: â­â­â­

- ç­çº§æ¨¡å‹
- ç­çº§ç®¡ç†ï¼ˆè€å¸ˆï¼‰
- å­¦ç”ŸåŠ å…¥ç­çº§
- ç­çº§ç»Ÿè®¡
```

### Phase 4: é«˜çº§åŠŸèƒ½ï¼ˆWeek 3ï¼‰
```
ä¼˜å…ˆçº§: â­â­

- å¯†ç é‡ç½®
- é‚®ä»¶éªŒè¯
- ç™»å½•æ—¥å¿—
- åšé¢˜ç»Ÿè®¡å¯è§†åŒ–
```

## ğŸ“ æŠ€æœ¯é€‰å‹

### è®¤è¯æ–¹å¼
```
æ¨è: Django REST Framework Tokenè®¤è¯ + Session

ä¼˜ç‚¹:
- ç®€å•æ˜“ç”¨
- å‰åç«¯åˆ†ç¦»å‹å¥½
- DjangoåŸç”Ÿæ”¯æŒ
```

### ä¾èµ–åŒ…
```python
# requirements.txt éœ€è¦æ·»åŠ 
djangorestframework-simplejwt==5.3.0  # JWTè®¤è¯ï¼ˆå¯é€‰ï¼‰
django-cors-headers==4.3.1            # å·²å®‰è£…
Pillow==10.1.0                        # å·²å®‰è£…ï¼ˆå¤´åƒä¸Šä¼ ï¼‰
```

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

å‡†å¤‡å¼€å§‹å¼€å‘äº†å—ï¼Ÿæˆ‘å¯ä»¥å¸®ä½ ï¼š

1. âœ… åˆ›å»ºusersåº”ç”¨
2. âœ… åˆ›å»ºUserProfileæ¨¡å‹
3. âœ… åˆ›å»ºClassæ¨¡å‹
4. âœ… åˆ›å»ºæ³¨å†Œ/ç™»å½•è§†å›¾
5. âœ… åˆ›å»ºæ³¨å†Œ/ç™»å½•é¡µé¢
6. âœ… åˆ›å»ºä¸ªäººä¸­å¿ƒé¡µé¢
7. âœ… å®ç°æƒé™æ§åˆ¶

---

**å‘Šè¯‰æˆ‘ï¼šç°åœ¨å¼€å§‹åˆ›å»ºç”¨æˆ·è®¤è¯ç³»ç»Ÿå—ï¼Ÿ** ğŸš€
